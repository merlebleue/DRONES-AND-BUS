\newcommand*{\course}[1]{\def\@course{#1}}
\newcommand*{\shortauthor}[1]{\def\@shortauthor{#1}}
\newcommand*{\semesteryear}[1]{\def\@semesteryear{#1}}
\newcommand*{\covertable}[1]{\def\@covertable{#1}}
\newcommand*{\coverimage}[1]{\def\@coverimage{#1}}
\newcommand*{\coverimagecaption}[1]{\def\@coverimagecaption{#1}}
\newcommand*{\figurefolder}[1]{\def\@figurefolder{#1}}

\newcommand*{\makecover}{{\hypersetup{hidelinks}
    \begin{titlepage}
        {\centering
        \begin{minipage}{0.38\linewidth}
             \includegraphics[width=0.95\linewidth]{misc/logoepfl.png}
         \end{minipage}\begin{minipage}{0.62\linewidth}{
            {\Large École Polytechnique Fédérale de Lausanne}
             % {\trjnfamily ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE}\\

             \@course

             \@semesteryear
             }\end{minipage}

        \vfill
        
        \rule{\textwidth}{0.4pt}\bigskip

        {\huge\textbf{\@title }\par}\bigskip
        \@author \bigskip
        
        \rule{\textwidth}{0.4pt}

        \vfill

        \begin{figure}
            \centering
            \includegraphics[width=\textwidth]{\@figurefolder/\@coverimage}
            \caption{\@coverimagecaption}
            \label{fig:coverfigure}
        \end{figure}

        \vfill
        
        }
    \end{titlepage}
}}

% Add figure
\newcommand{\addfigure}[4][label]{\begin{figure}
    \centering
    \includegraphics{\@figurefolder/#2}
    \caption{#3}
    \label{fig:#1}
\end{figure}
}

%% font
% \usepackage{libertinus}  %% Math
% \usepackage{fontspec}
%\setmainfont{Linux Libertine O}  %% text
\usepackage{amsfonts}
\usepackage{bm}
% \usepackage{fontspec}
% \setmainfont{TeX Gyre Pagella}
% \usepackage{unicode-math}
% \setmathfont{Libertinus Math}
%% Margins
\usepackage[a4paper,
                left = 2 cm,
                right = 2 cm,
                bottom = 3 cm,
                top = 3 cm]
                {geometry}
%% Colors
\usepackage[dvipsnames]{xcolor}
\definecolor{comment}{HTML}{00AA00}
%% Colored links
\usepackage[
    pagebackref=true,
    colorlinks=true,
    allcolors=MidnightBlue,
]{hyperref}
%% Header and footer
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\@course}
\fancyhead[R]{\color{Gray}\@title}
\fancyfoot[C]{\rmfamily\thepage}
\fancyfoot[L]{\color{Gray}\nouppercase{\leftmark}}
\fancyfoot[R]{\@shortauthor}
%% Header and footer rules
\renewcommand\headrulewidth{1pt}
\renewcommand\footrulewidth{1pt}
\setlength{\headheight}{15pt}
%% Figures
\usepackage{float}
\floatplacement{figure}{H}
\floatplacement{table}{H}
\usepackage{graphicx}
\usepackage[justification=centering]{caption}
\usepackage[justification=centering]{subcaption}
\captionsetup[subfigure]{justification=centering}
%% Default image width to 0.8\linewidth
\setkeys{Gin}{width=0.8\linewidth}
%% Easy tables
\usepackage{tabularray}
%% Math symbols
\usepackage{algorithm,algorithmicx,algpseudocode}
\usepackage{amsmath}
%% Legal units
\usepackage{siunitx}
\sisetup{detect-all}
%% Default EPFL font for the cover page
%\usepackage{trajan}
%% Utils (itemize & enumerate)
\usepackage{enumitem}
\setlist[itemize,1]{label=›}
\setlist[itemize,2]{label=\textbullet}
\setlist[itemize,3]{label=\textasteriskcentered}
\setlist[itemize,4]{label=\textperiodcentered}
%% Directory tree
\usepackage{dirtree}
%% Include pdfs
\usepackage[final]{pdfpages}
%% Section names
\usepackage{nameref}
%% Typeset source code listings
\usepackage{listings}
\lstset{
    language=Python,
    basicstyle=\ttfamily\small,
    backgroundcolor=\color{gray!10},
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    commentstyle=\color{comment},
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny,
    breaklines=true,
    showstringspaces=false,
    morestring=[s]{"""}{"""},
}
%% Line spacing
\usepackage{setspace}
\renewcommand{\baselinestretch}{1.15}
%% Bibliography
\usepackage{natbib}
\bibliographystyle{authordate1}
\setcitestyle{authoryear,authorsep={\&},open={(}, close={)}}
%% Backref style
\renewcommand*{\backreflastsep}{, }
\renewcommand*{\backreftwosep}{, }
\renewcommand*{\backref}[1]{}
\renewcommand*{\backrefalt}[4]{%
  \ifcase #1 %
    No citations.% use \relax if you do not want the "No citations" message
  \or
(page #4).%
  \else
(pages #4).%
  \fi%
}
%% Writing in multiple columns
\if@twocolumn\else
    \usepackage{multicol}
\fi
%% Keep line breaks inside margins
\AtBeginDocument{\emergencystretch 3em}

%% Custom math shortcuts
\newcommand*{\B}[1]{\ifmmode\bm{#1}\else\textbf{#1}\fi}
\newcommand{\diff}{\mathrm{d}}
\newcommand{\p}{\partial}
\newcommand{\validate}{✔}
\newcommand{\cross}{✘}
%% Wrapfigure
\usepackage{wrapfig}